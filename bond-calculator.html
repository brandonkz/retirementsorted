<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="South Africa bond calculator: monthly repayment, extra payment savings, and the definitive guide to whether you should pay off your home loan or invest in your RA.">
  <link rel="canonical" href="https://retirementsorted.co.za/bond-calculator.html">
  <title>Property vs RA Calculator South Africa ‚Äî Bond Repayment, Leverage & Appreciation | RetirementSorted</title>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z9ENF0SQS9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-Z9ENF0SQS9');
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Property vs RA Calculator South Africa",
    "applicationCategory": "FinanceApplication",
    "url": "https://retirementsorted.co.za/bond-calculator.html",
    "description": "Compare paying extra into your home loan vs investing in a retirement annuity. Includes bond repayment calculator and extra payment impact for South African homeowners.",
    "operatingSystem": "Any",
    "isAccessibleForFree": true,
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "ZAR" }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Should I pay off my bond or invest in a retirement annuity in South Africa?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "It depends on your marginal tax rate and bond interest rate. If your marginal tax rate is 31% and your bond rate is prime (11.25%), the after-tax cost of your bond is about 7.8%. A retirement annuity at 10% growth with a 31% tax deduction gives an effective return of around 14.5%. In this case, investing in the RA wins. If your bond rate is above 13‚Äì14% or your marginal rate is low (18%), extra bond payments are often better."
        }
      },
      {
        "@type": "Question",
        "name": "What is the current prime interest rate in South Africa?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The current prime lending rate in South Africa is 11.25% (as of early 2026), following the SARB repo rate of 7.75%. Most home loans are priced at prime minus 0.5% to prime plus 2% depending on your credit profile."
        }
      },
      {
        "@type": "Question",
        "name": "How much do I save by paying extra into my bond?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Paying just R500 extra per month on a R1.5 million bond at 11.25% saves approximately R380,000 in interest and cuts 4 years off your loan term. Use our extra payment calculator to see your exact savings."
        }
      }
    ]
  }
  </script>

  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%232d6a4f' width='100' height='100' rx='20'/><text x='50' y='70' font-size='60' text-anchor='middle' fill='white'>üè†</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    .page-hero {
      background: linear-gradient(135deg, #1b4332 0%, #2d6a4f 100%);
      color: white;
      padding: 60px 20px;
      text-align: center;
    }
    .page-hero h1 {
      font-size: 2.4rem;
      font-weight: 900;
      margin-bottom: 12px;
      line-height: 1.2;
    }
    .page-hero p {
      font-size: 1.1rem;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto 16px;
    }
    .rate-badge {
      display: inline-block;
      background: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.3);
      padding: 6px 16px;
      border-radius: 99px;
      font-size: 0.9rem;
      font-weight: 600;
    }

    .calc-page { max-width: 960px; margin: 0 auto; padding: 40px 20px; }

    .tool-tabs {
      display: flex;
      gap: 4px;
      background: #f3f4f6;
      border-radius: 10px;
      padding: 4px;
      margin-bottom: 32px;
    }
    .tool-tab {
      flex: 1;
      padding: 10px 8px;
      border: none;
      background: transparent;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }
    .tool-tab.active {
      background: white;
      color: #1b4332;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }

    .tool-panel { display: none; }
    .tool-panel.active { display: block; }

    .calc-card {
      background: white;
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      margin-bottom: 24px;
    }
    .calc-card h2 {
      font-size: 1.4rem;
      font-weight: 700;
      color: #1b4332;
      margin-bottom: 6px;
    }
    .calc-card .subtitle {
      color: #6b7280;
      font-size: 0.95rem;
      margin-bottom: 28px;
    }

    .field-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 8px;
    }
    @media(max-width:600px) { .field-grid { grid-template-columns: 1fr; } }

    .field-group { margin-bottom: 20px; }
    .field-label {
      display: block;
      font-weight: 600;
      font-size: 0.9rem;
      color: #374151;
      margin-bottom: 6px;
    }
    .field-hint { font-weight: 400; color: #9ca3af; font-size: 0.85rem; }
    .field-input {
      width: 100%;
      padding: 11px 14px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 1rem;
      font-family: inherit;
      transition: border-color 0.2s;
    }
    .field-input:focus {
      outline: none;
      border-color: #2d6a4f;
      box-shadow: 0 0 0 3px rgba(45,106,79,0.1);
    }
    .field-input.rate { max-width: 140px; }

    .prime-link {
      font-size: 0.8rem;
      color: #2d6a4f;
      text-decoration: underline;
      cursor: pointer;
      margin-left: 8px;
    }

    /* Results */
    .result-strip {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 14px;
      margin: 24px 0;
    }
    .result-box {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      padding: 16px;
      text-align: center;
    }
    .result-box.green { background: #f0fdf4; border-color: #86efac; }
    .result-box.amber { background: #fffbeb; border-color: #fcd34d; }
    .result-box.red   { background: #fef2f2; border-color: #fca5a5; }
    .result-box-label, .rb-label { font-size: 0.78rem; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; font-weight: 600; margin-bottom: 6px; }
    .result-box-value, .rb-value { font-size: 1.6rem; font-weight: 800; color: #1f2937; line-height: 1.1; }
    .result-box-value.green, .rb-value.green { color: #15803d; }
    .result-box-value.red,   .rb-value.red   { color: #dc2626; }
    .result-box-sub, .rb-sub { font-size: 0.78rem; color: #6b7280; margin-top: 4px; line-height: 1.4; }
    .result-box-sub   { font-size: 0.8rem; color: #6b7280; margin-top: 4px; }

    .insight-box {
      border-radius: 10px;
      padding: 16px 20px;
      margin: 16px 0;
      font-size: 0.95rem;
      line-height: 1.6;
    }
    .insight-box.blue   { background: #eff6ff; border-left: 4px solid #3b82f6; color: #1e40af; }
    .insight-box.green  { background: #f0fdf4; border-left: 4px solid #22c55e; color: #15803d; }
    .insight-box.amber  { background: #fffbeb; border-left: 4px solid #f59e0b; color: #92400e; }
    .insight-box.purple { background: #f5f3ff; border-left: 4px solid #8b5cf6; color: #5b21b6; }

    /* Amortisation table */
    .amort-table-wrap { overflow-x: auto; margin-top: 20px; }
    .amort-table { width: 100%; border-collapse: collapse; font-size: 0.88rem; }
    .amort-table th { background: #1b4332; color: white; padding: 10px 12px; text-align: right; font-weight: 600; }
    .amort-table th:first-child { text-align: left; }
    .amort-table td { padding: 9px 12px; border-bottom: 1px solid #f3f4f6; text-align: right; }
    .amort-table td:first-child { text-align: left; font-weight: 600; }
    .amort-table tr:nth-child(even) td { background: #f9fafb; }
    .amort-table tr.extra-row td { background: #f0fdf4 !important; color: #15803d; }
    .amort-table .show-more-row td { text-align: center; padding: 12px; color: #2d6a4f; font-weight: 600; cursor: pointer; }
    .amort-table .show-more-row td:hover { background: #f0fdf4; }

    /* Bond vs RA */
    .comparison-cols {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 16px;
      margin: 24px 0;
    }
    @media(max-width:800px) { .comparison-cols { grid-template-columns: 1fr; } }

    .leverage-badge {
      display: inline-block;
      background: #f0fdf4;
      border: 1px solid #86efac;
      color: #15803d;
      font-size: 0.78rem;
      font-weight: 700;
      padding: 3px 10px;
      border-radius: 99px;
      margin-top: 6px;
    }
    .equity-grow-strip {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 10px;
      margin: 16px 0;
    }
    .equity-cell {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 12px;
      text-align: center;
      font-size: 0.85rem;
    }
    .equity-cell strong { display: block; font-size: 1.1rem; color: #1b4332; }
    .equity-cell.highlight { background: #f0fdf4; border-color: #86efac; }

    .compare-card {
      border-radius: 12px;
      padding: 24px;
      border: 2px solid #e5e7eb;
    }
    .compare-card.winner { border-color: #22c55e; background: #f0fdf4; }
    .compare-card h3 { font-size: 1.1rem; font-weight: 700; margin-bottom: 4px; }
    .compare-card .compare-label { font-size: 0.8rem; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 12px; }
    .compare-metric { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid rgba(0,0,0,0.06); font-size: 0.9rem; }
    .compare-metric:last-child { border-bottom: none; }
    .compare-metric-label { color: #6b7280; }
    .compare-metric-value { font-weight: 700; color: #1f2937; }
    .compare-metric-value.green { color: #15803d; }
    .winner-badge { display: inline-block; background: #22c55e; color: white; font-size: 0.75rem; font-weight: 700; padding: 2px 8px; border-radius: 99px; margin-left: 8px; vertical-align: middle; }

    .verdict-box {
      border-radius: 12px;
      padding: 24px;
      text-align: center;
      margin: 24px 0;
    }
    .verdict-box h3 { font-size: 1.4rem; font-weight: 800; margin-bottom: 8px; }
    .verdict-box p { font-size: 0.95rem; line-height: 1.6; }
    .verdict-box.green-verdict { background: #f0fdf4; border: 2px solid #22c55e; color: #15803d; }
    .verdict-box.amber-verdict { background: #fffbeb; border: 2px solid #f59e0b; color: #92400e; }
    .verdict-box.bond-verdict  { background: #eff6ff; border: 2px solid #3b82f6; color: #1e40af; }

    .cta-strip {
      background: #1b4332;
      color: white;
      border-radius: 12px;
      padding: 24px 28px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      margin-top: 28px;
    }
    .cta-strip p { font-size: 0.95rem; opacity: 0.9; margin-top: 4px; }
    .cta-strip h3 { font-weight: 700; font-size: 1.1rem; }
    .cta-btn {
      background: #40916c;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 700;
      text-decoration: none;
      white-space: nowrap;
      transition: background 0.2s;
      flex-shrink: 0;
    }
    .cta-btn:hover { background: #52b788; color: white; }
    @media(max-width:600px) { .cta-strip { flex-direction: column; text-align: center; } }

    .cross-links { display: flex; flex-wrap: wrap; gap: 12px; margin-top: 28px; }
    .cross-link {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 12px 16px;
      text-decoration: none;
      color: #374151;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.2s;
    }
    .cross-link:hover { background: #f0fdf4; border-color: #86efac; color: #15803d; }

    .hidden { display: none; }
  </style>
</head>
<body>

  <header class="header">
    <div class="container">
      <div class="header-inner">
        <a href="/" class="logo">RetirementSorted</a>
        <button class="nav-toggle" aria-expanded="false" aria-controls="primary-nav" aria-label="Toggle navigation">
          <span></span><span></span><span></span>
        </button>
        <nav class="nav" id="primary-nav">
          <a href="/#calculator">Two-Pot</a>
          <a href="/#ra-saver" style="color:#15803d;font-weight:600;">üí∞ RA Saver</a>
          <a href="bond-calculator.html" style="color:#15803d;font-weight:600;">üè† Bond</a>
          <a href="net-salary-calculator.html">Salary</a>
          <a href="fee-calculator.html">Fees</a>
          <a href="joint-budget-calculator.html">Joint Budget</a>
          <a href="/blog/">Articles</a>
        </nav>
      </div>
    </div>
  </header>

  <section class="page-hero">
    <div>
      <h1>üè† Bond Calculator South Africa</h1>
      <p>Monthly repayments, extra payment savings, and the answer to SA's biggest retirement question: pay off your bond or invest in your RA?</p>
      <span class="rate-badge">üìä Current prime rate: 11.25% (SARB repo 7.75%)</span>
    </div>
  </section>

  <div class="calc-page">

    <!-- Tabs -->
    <div class="tool-tabs">
      <button class="tool-tab active" data-tab="repayment">üè† Bond Repayment</button>
      <button class="tool-tab" data-tab="extra">üí∏ Extra Payment</button>
      <button class="tool-tab" data-tab="vs-ra">üè† Property vs RA</button>
      <button class="tool-tab" data-tab="rent-vs-buy">üèòÔ∏è Rent vs Buy</button>
    </div>

    <!-- ‚ïê‚ïê TAB 1: BOND REPAYMENT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="tool-panel active" id="tab-repayment">
      <div class="calc-card">
        <h2>Bond Repayment Calculator</h2>
        <p class="subtitle">See your monthly instalment, total interest, and a full year-by-year amortisation.</p>

        <div class="field-grid">
          <div class="field-group">
            <label class="field-label" for="r-loan">Loan Amount (Bond Value) <span class="field-hint">e.g. R1,500,000</span></label>
            <input class="field-input" type="text" id="r-loan" placeholder="R 1,500,000" inputmode="numeric">
          </div>
          <div class="field-group">
            <label class="field-label" for="r-rate">
              Interest Rate (% p.a.)
              <span class="prime-link" onclick="document.getElementById('r-rate').value='11.25';calcRepayment()">Use prime (11.25%)</span>
            </label>
            <input class="field-input rate" type="number" id="r-rate" placeholder="11.25" step="0.05" min="0" max="30" value="11.25">
          </div>
          <div class="field-group">
            <label class="field-label" for="r-term">Loan Term (years)</label>
            <input class="field-input rate" type="number" id="r-term" placeholder="20" min="1" max="30" value="20">
          </div>
        </div>

        <div id="repayment-results" class="hidden">
          <div class="result-strip" id="r-strip"></div>
          <div id="r-insight" class="insight-box blue"></div>
          <div class="amort-table-wrap">
            <table class="amort-table">
              <thead>
                <tr>
                  <th>Year</th>
                  <th>Opening Balance</th>
                  <th>Principal Paid</th>
                  <th>Interest Paid</th>
                  <th>Closing Balance</th>
                </tr>
              </thead>
              <tbody id="amort-body"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê TAB 2: EXTRA PAYMENT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="tool-panel" id="tab-extra">
      <div class="calc-card">
        <h2>Extra Payment Impact Calculator</h2>
        <p class="subtitle">See how much time and money you save by paying a little extra each month.</p>

        <div class="field-grid">
          <div class="field-group">
            <label class="field-label" for="e-loan">Current Bond Balance</label>
            <input class="field-input" type="text" id="e-loan" placeholder="R 1,200,000" inputmode="numeric">
          </div>
          <div class="field-group">
            <label class="field-label" for="e-rate">
              Interest Rate (% p.a.)
              <span class="prime-link" onclick="document.getElementById('e-rate').value='11.25';calcExtra()">Use prime</span>
            </label>
            <input class="field-input rate" type="number" id="e-rate" placeholder="11.25" step="0.05" value="11.25">
          </div>
          <div class="field-group">
            <label class="field-label" for="e-term">Remaining Term (years)</label>
            <input class="field-input rate" type="number" id="e-term" placeholder="18" min="1" max="30" value="18">
          </div>
          <div class="field-group">
            <label class="field-label" for="e-extra">Extra Monthly Payment</label>
            <input class="field-input" type="text" id="e-extra" placeholder="R 500" inputmode="numeric">
          </div>
        </div>

        <div id="extra-results" class="hidden">
          <div class="result-strip" id="e-strip"></div>
          <div id="e-insight" class="insight-box green"></div>
          <div class="amort-table-wrap">
            <table class="amort-table">
              <thead>
                <tr>
                  <th>Year</th>
                  <th>Balance (Normal)</th>
                  <th>Balance (Extra)</th>
                  <th>Interest Saved (Cumul.)</th>
                </tr>
              </thead>
              <tbody id="extra-amort-body"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê TAB 3: BOND vs RA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="tool-panel" id="tab-vs-ra">
      <div class="calc-card">
        <h2>Property vs RA</h2>
        <p class="subtitle">Should you build equity in your property or invest in a retirement annuity? Now with leverage and appreciation factored in ‚Äî not just interest savings.</p>

        <div class="insight-box blue" style="margin-bottom:24px;">
          <strong>How this works:</strong> We compare <strong>three paths</strong> for your extra monthly money. The key insight most calculators miss: your property appreciates on its <em>full value</em>, not just your equity ‚Äî that's leverage working for you. A R1.5M property appreciating at 6% generates R90k/year on your R300k equity, a 30% return on equity from appreciation alone.
        </div>

        <div class="field-grid">
          <div class="field-group">
            <label class="field-label" for="v-bond-rate">
              Bond Interest Rate (% p.a.)
              <span class="prime-link" onclick="document.getElementById('v-bond-rate').value='11.25';calcVsRA()">Use prime</span>
            </label>
            <input class="field-input rate" type="number" id="v-bond-rate" placeholder="11.25" step="0.05" value="11.25">
          </div>
          <div class="field-group">
            <label class="field-label" for="v-tax-rate">Your Marginal Tax Rate (%)</label>
            <select class="field-input rate" id="v-tax-rate">
              <option value="18">18% (income under R237k)</option>
              <option value="26">26% (R237k‚ÄìR370k)</option>
              <option value="31" selected>31% (R370k‚ÄìR512k)</option>
              <option value="36">36% (R512k‚ÄìR673k)</option>
              <option value="39">39% (R673k‚ÄìR857k)</option>
              <option value="41">41% (R857k‚ÄìR1.8M)</option>
              <option value="45">45% (above R1.8M)</option>
            </select>
          </div>
          <div class="field-group">
            <label class="field-label" for="v-ra-return">Expected RA Fund Return (% p.a.) <span class="field-hint">10% is a reasonable SA equity assumption</span></label>
            <input class="field-input rate" type="number" id="v-ra-return" placeholder="10" step="0.5" value="10">
          </div>
          <div class="field-group">
            <label class="field-label" for="v-monthly">Monthly Extra Amount to Compare</label>
            <input class="field-input" type="text" id="v-monthly" placeholder="R 1,000" inputmode="numeric">
          </div>
          <div class="field-group">
            <label class="field-label" for="v-years">Comparison Period (years)</label>
            <input class="field-input rate" type="number" id="v-years" placeholder="20" min="1" max="40" value="20">
          </div>
          <div class="field-group">
            <label class="field-label" for="v-prop-value">
              Property Current Market Value
              <span class="field-hint">Appreciation is calculated on this full value (leverage)</span>
            </label>
            <input class="field-input" type="text" id="v-prop-value" placeholder="R 1,500,000" inputmode="numeric">
          </div>
          <div class="field-group">
            <label class="field-label" for="v-equity">
              Your Current Equity
              <span class="field-hint">Property value minus outstanding bond balance</span>
            </label>
            <input class="field-input" type="text" id="v-equity" placeholder="R 300,000" inputmode="numeric">
          </div>
          <div class="field-group">
            <label class="field-label" for="v-appreciation">
              Expected Property Appreciation (% p.a.)
              <span class="field-hint">SA long-run avg ‚âà 5‚Äì7% ‚Ä¢ Cape Town ‚âà 7‚Äì9%</span>
            </label>
            <input class="field-input rate" type="number" id="v-appreciation" placeholder="6" step="0.5" value="6">
          </div>
        </div>

        <div id="vsra-results" class="hidden">
          <div id="verdict-box"></div>
          <div id="leverage-strip" style="margin:16px 0;"></div>
          <div class="comparison-cols" id="compare-cols"></div>
          <div id="equity-growth-section" style="margin-top:24px;"></div>
          <div id="vsra-insight" class="insight-box purple"></div>
          <div id="vsra-caveat" class="insight-box amber"></div>
        </div>
      </div>

      <!-- Static explainer -->
      <div class="calc-card">
        <h2>Property vs RA ‚Äî General Rule of Thumb</h2>
        <p class="subtitle">Interest savings only (no appreciation). Add property details above to see the full picture.</p>

        <table style="width:100%;border-collapse:collapse;font-size:0.93rem;">
          <thead>
            <tr style="background:#f3f4f6;">
              <th style="padding:10px 12px;text-align:left;border-bottom:2px solid #e5e7eb;">Marginal Tax Rate</th>
              <th style="padding:10px 12px;text-align:left;border-bottom:2px solid #e5e7eb;">After-Tax Bond Cost</th>
              <th style="padding:10px 12px;text-align:left;border-bottom:2px solid #e5e7eb;">RA Effective Return</th>
              <th style="padding:10px 12px;text-align:left;border-bottom:2px solid #e5e7eb;">Verdict at Prime (11.25%)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;font-weight:600;">18%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">9.2%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">11.9%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">‚öñÔ∏è Close ‚Äî extra bond payment slightly better</td>
            </tr>
            <tr style="background:#f9fafb;">
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;font-weight:600;">26%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">8.3%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">13.5%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">‚úÖ RA wins clearly</td>
            </tr>
            <tr>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;font-weight:600;">31%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">7.8%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">14.5%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">‚úÖ RA wins strongly</td>
            </tr>
            <tr style="background:#f9fafb;">
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;font-weight:600;">36%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">7.2%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">15.6%</td>
              <td style="padding:10px 12px;border-bottom:1px solid #f3f4f6;">‚úÖ RA wins strongly</td>
            </tr>
            <tr>
              <td style="padding:10px 12px;font-weight:600;">41%+</td>
              <td style="padding:10px 12px;">6.6%</td>
              <td style="padding:10px 12px;">17.0%</td>
              <td style="padding:10px 12px;">‚úÖ RA wins decisively</td>
            </tr>
          </tbody>
        </table>

        <div class="insight-box amber" style="margin-top:20px;">
          ‚ö†Ô∏è <strong>Exception:</strong> If you're within 5 years of retirement, have no RA headroom left, or your bond rate is above 15%, extra bond payments can make more sense. Always consider liquidity ‚Äî you can access bond equity via access bond; RA funds are locked until 55.
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê TAB 4: RENT VS BUY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="tool-panel" id="tab-rent-vs-buy">
      <div class="calc-card">
        <h2>üèòÔ∏è Rent vs Buy Calculator</h2>
        <p class="subtitle">Should you rent and invest the difference, or buy and build equity? The full South African picture ‚Äî leverage, appreciation, opportunity cost and all.</p>

        <div class="insight-box blue" style="margin-bottom:24px;">
          <strong>The key debate:</strong> Buying builds equity through principal repayment <em>and</em> leveraged appreciation. Renting frees up cash to invest elsewhere. The calculator shows which path builds more wealth over your time horizon ‚Äî and by how much.
        </div>

        <div class="field-grid">
          <div class="field-group">
            <label class="field-label" for="rvb-rent">Monthly Rent (or Equivalent)
              <span class="field-hint">What you pay now, or would pay for an equivalent property</span>
            </label>
            <input class="field-input" type="text" id="rvb-rent" placeholder="R 12,000" inputmode="numeric">
          </div>
          <div class="field-group">
            <label class="field-label" for="rvb-bond-repay">Monthly Bond Repayment
              <span class="field-hint">Use the Bond Repayment tab above to calculate this</span>
            </label>
            <input class="field-input" type="text" id="rvb-bond-repay" placeholder="R 15,000" inputmode="numeric">
          </div>
          <div class="field-group">
            <label class="field-label" for="rvb-deposit">Deposit (Capital)
              <span class="field-hint">Your deposit only ‚Äî this becomes equity. Transfer duty &amp; bond reg costs are calculated separately below.</span>
            </label>
            <input class="field-input" type="text" id="rvb-deposit" placeholder="R 150,000" inputmode="numeric">
          </div>
          <div class="field-group">
            <label class="field-label" for="rvb-prop-value">Property Purchase Price</label>
            <input class="field-input" type="text" id="rvb-prop-value" placeholder="R 1,500,000" inputmode="numeric">
          </div>
          <div class="field-group">
            <label class="field-label" for="rvb-current-value">
              Current Market Value
              <span class="field-hint">Optional ‚Äî if you already own, enter what it's worth today. Appreciation calculates from this value.</span>
            </label>
            <input class="field-input" type="text" id="rvb-current-value" placeholder="Leave blank if buying now">
          </div>
          <div class="field-group">
            <label class="field-label" for="rvb-current-bond">
              Current Remaining Bond Balance
              <span class="field-hint">Optional ‚Äî leave blank if buying now</span>
            </label>
            <input class="field-input" type="text" id="rvb-current-bond" placeholder="Leave blank if buying now">
          </div>
          <div id="rvb-current-position" class="hidden" style="margin:4px 0 16px;"></div>
          <div class="field-group" id="rvb-costs-preview" style="display:none;">
            <label class="field-label">Sunk Costs (Auto-Calculated)
              <span class="field-hint">These are the buyer's costs that become nothing ‚Äî they never appear in your equity</span>
            </label>
            <div id="rvb-costs-display" style="background:#fffbeb;border:1px solid #fcd34d;border-radius:8px;padding:12px 14px;font-size:0.9rem;color:#92400e;line-height:1.8;"></div>
          </div>
          <div class="field-group">
            <label class="field-label" for="rvb-bond-rate">Bond Interest Rate (% p.a.)
              <span class="prime-link" onclick="document.getElementById('rvb-bond-rate').value='11.25';calcRentVsBuy()">Use prime</span>
            </label>
            <input class="field-input rate" type="number" id="rvb-bond-rate" placeholder="11.25" step="0.05" value="11.25">
          </div>
          <div class="field-group">
            <label class="field-label" for="rvb-bond-term">Bond Term (years)</label>
            <input class="field-input rate" type="number" id="rvb-bond-term" placeholder="20" min="5" max="30" value="20">
          </div>
          <div class="field-group">
            <label class="field-label" for="rvb-appreciation">Property Appreciation (% p.a.)
              <span class="field-hint">SA long-run avg 5‚Äì7%</span>
            </label>
            <input class="field-input rate" type="number" id="rvb-appreciation" placeholder="6" step="0.5" value="6">
          </div>
          <div class="field-group">
            <label class="field-label" for="rvb-invest-return">Investment Return if Renting (% p.a.)
              <span class="field-hint">What you'd earn investing the difference (ETF/RA)</span>
            </label>
            <input class="field-input rate" type="number" id="rvb-invest-return" placeholder="10" step="0.5" value="10">
          </div>
          <div class="field-group">
            <label class="field-label" for="rvb-rent-inflation">Annual Rent Increase (% p.a.)
              <span class="field-hint">SA average ‚âà 5‚Äì6%</span>
            </label>
            <input class="field-input rate" type="number" id="rvb-rent-inflation" placeholder="5.5" step="0.5" value="5.5">
          </div>
          <div class="field-group">
            <label class="field-label" for="rvb-years">Comparison Period (years)</label>
            <input class="field-input rate" type="number" id="rvb-years" placeholder="20" min="1" max="30" value="20">
          </div>
        </div>

        <div id="rvb-results" class="hidden">
          <!-- Verdict -->
          <div id="rvb-verdict" style="margin:24px 0;"></div>

          <!-- Key numbers -->
          <div class="result-strip" id="rvb-strip" style="grid-template-columns:repeat(auto-fill,minmax(160px,1fr));"></div>

          <!-- Side-by-side comparison -->
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin:24px 0;" id="rvb-cols"></div>

          <!-- Year by year snapshot -->
          <div id="rvb-timeline" style="margin-top:20px;"></div>

          <!-- Insights -->
          <div id="rvb-insight" class="insight-box green" style="margin-top:16px;"></div>
          <div id="rvb-caveat" class="insight-box amber" style="margin-top:12px;"></div>
        </div>
      </div>

      <!-- The rent trap explainer -->
      <div class="calc-card">
        <h2>The "Throwing Money Away on Rent" Debate</h2>
        <p class="subtitle">The full picture ‚Äî because both sides have a point.</p>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
          <div style="border:1px solid #e5e7eb;border-radius:10px;padding:20px;">
            <h4 style="color:#15803d;font-weight:700;margin-bottom:10px;">‚úÖ Case For Buying</h4>
            <ul style="color:#6b7280;font-size:0.9rem;line-height:1.8;padding-left:16px;">
              <li>Leverage amplifies appreciation returns</li>
              <li>Forced savings via principal repayment</li>
              <li>Bond repayment is fixed; rent keeps rising</li>
              <li>Asset owned outright after bond ends</li>
              <li>No landlord risk (eviction, sale)</li>
              <li>Access bond gives you liquidity</li>
            </ul>
          </div>
          <div style="border:1px solid #e5e7eb;border-radius:10px;padding:20px;">
            <h4 style="color:#3b82f6;font-weight:700;margin-bottom:10px;">‚úÖ Case For Renting</h4>
            <ul style="color:#6b7280;font-size:0.9rem;line-height:1.8;padding-left:16px;">
              <li>Flexibility to move / emigrate</li>
              <li>Lower monthly outlay (often)</li>
              <li>No transfer duties, rates, maintenance</li>
              <li>Invest the difference at market returns</li>
              <li>No concentration risk in one property</li>
              <li>Better in declining property markets</li>
            </ul>
          </div>
        </div>
        <div class="insight-box blue" style="margin-top:20px;">
          üí° <strong>SA-specific context:</strong> Transfer duty alone on a R1.5M property is R42,000. Bond registration adds ~R25,000. These upfront costs mean buying only wins if you stay for 4+ years. The calculator accounts for this ‚Äî watch the "breakeven year" line.
        </div>
      </div>
    </div>

    <!-- Cross-tool links -->
    <div class="cross-links">
      <a href="/#ra-saver" class="cross-link">üí∞ RA Tax Saver Calculator</a>
      <a href="/net-salary-calculator.html" class="cross-link">üíµ Net Salary Calculator</a>
      <a href="/#calculator" class="cross-link">üè¶ Two-Pot Calculator</a>
      <a href="/fee-calculator.html" class="cross-link">üìä RA Fee Impact Calculator</a>
      <a href="/blog/" class="cross-link">üìñ Retirement Articles</a>
    </div>

  </div><!-- /calc-page -->

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <div class="logo"><span class="logo-text">RetirementSorted</span></div>
          <p>Independent retirement planning tools for South Africans. No jargon. No upselling.</p>
        </div>
        <div class="footer-links">
          <h4>Tools</h4>
          <a href="/#calculator">Two-Pot Calculator</a>
          <a href="/#ra-saver">RA Tax Saver</a>
          <a href="/bond-calculator.html">Bond Calculator</a>
          <a href="/net-salary-calculator.html">Net Salary</a>
          <a href="/fee-calculator.html">Fee Impact</a>
        </div>
        <div class="footer-links">
          <h4>Sorted Family</h4>
          <a href="https://betsorted.co.za" target="_blank" rel="noopener">BetSorted</a>
          <a href="https://cryptocasinosorted.com" target="_blank" rel="noopener">CryptoCasinoSorted</a>
          <a href="https://paidproperly.co.za" target="_blank" rel="noopener">PaidProperly</a>
        </div>
      </div>
      <div class="footer-bottom">
        <p>¬© 2026 RetirementSorted ‚Ä¢ Independent financial education</p>
        <p class="disclaimer">Disclaimer: This calculator provides estimates only. Interest rates and tax rules change ‚Äî verify with SARS and your bank. Consult a registered financial advisor before making decisions.</p>
      </div>
    </div>
  </footer>

  <script src="nav.js"></script>
  <script src="calculator-utils.js"></script>

  <script>
  // ‚îÄ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const fmt   = n => Math.round(n).toLocaleString('en-ZA');
  const fmtR  = n => 'R ' + fmt(n);
  const fmtPct = n => n.toFixed(1) + '%';

  function parseCurrency(str) {
    return parseFloat((str || '').replace(/[^0-9.]/g, '')) || 0;
  }

  function monthlyPayment(principal, annualRate, termYears) {
    const r = annualRate / 100 / 12;
    const n = termYears * 12;
    if (r === 0) return principal / n;
    return principal * r * Math.pow(1 + r, n) / (Math.pow(1 + r, n) - 1);
  }

  function formatMonths(months) {
    const y = Math.floor(months / 12);
    const m = months % 12;
    if (y === 0) return `${m} month${m !== 1 ? 's' : ''}`;
    if (m === 0) return `${y} year${y !== 1 ? 's' : ''}`;
    return `${y} yr ${m} mo`;
  }

  // ‚îÄ‚îÄ‚îÄ Tab switching ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  document.querySelectorAll('.tool-tab').forEach(tab => {
    tab.addEventListener('click', () => {
      document.querySelectorAll('.tool-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tool-panel').forEach(p => p.classList.remove('active'));
      tab.classList.add('active');
      document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
    });
  });

  // ‚îÄ‚îÄ‚îÄ Currency input formatting ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  ['r-loan','e-loan','e-extra','v-monthly','v-prop-value','v-equity'].forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    el.addEventListener('input', () => {
      const raw = parseCurrency(el.value);
      if (raw > 0) el.value = 'R ' + fmt(raw);
      triggerCalc(id);
    });
  });

  function triggerCalc(id) {
    if (['r-loan','r-rate','r-term'].some(x => x === id) || id.startsWith('r-')) calcRepayment();
    if (['e-loan','e-rate','e-term','e-extra'].some(x => x === id)) calcExtra();
    if (['v-bond-rate','v-tax-rate','v-ra-return','v-monthly','v-years','v-prop-value','v-equity','v-appreciation'].some(x => x === id)) calcVsRA();
  }

  document.querySelectorAll('#tab-repayment input').forEach(el => el.addEventListener('input', calcRepayment));
  document.querySelectorAll('#tab-extra input').forEach(el => el.addEventListener('input', calcExtra));
  document.querySelectorAll('#tab-vs-ra input, #tab-vs-ra select').forEach(el => el.addEventListener('input', calcVsRA));

  // ‚îÄ‚îÄ‚îÄ Tab 1: Bond Repayment ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function calcRepayment() {
    const principal = parseCurrency(document.getElementById('r-loan').value);
    const rate      = parseFloat(document.getElementById('r-rate').value) || 0;
    const term      = parseInt(document.getElementById('r-term').value) || 0;
    if (!principal || !rate || !term) return;

    const monthly      = monthlyPayment(principal, rate, term);
    const totalPaid    = monthly * term * 12;
    const totalInterest = totalPaid - principal;

    document.getElementById('r-strip').innerHTML = `
      <div class="result-box"><div class="result-box-label">Monthly Payment</div><div class="result-box-value">${fmtR(monthly)}</div></div>
      <div class="result-box amber"><div class="result-box-label">Total Interest</div><div class="result-box-value red">${fmtR(totalInterest)}</div></div>
      <div class="result-box"><div class="result-box-label">Total Cost</div><div class="result-box-value">${fmtR(totalPaid)}</div></div>
      <div class="result-box"><div class="result-box-label">Interest / Loan Ratio</div><div class="result-box-value">${fmtPct(totalInterest/principal*100)}</div><div class="result-box-sub">you pay ${fmtPct(totalInterest/principal*100)} extra in interest</div></div>
    `;

    document.getElementById('r-insight').innerHTML =
      `üí° On a <strong>${fmtR(principal)}</strong> bond at <strong>${rate}%</strong> over <strong>${term} years</strong>, you pay <strong>${fmtR(monthly)}/month</strong>. ` +
      `Over the full term, you pay back <strong>${fmtR(totalPaid)}</strong> ‚Äî <strong>${fmtR(totalInterest)}</strong> of that is pure interest. ` +
      `Paying just <strong>R500/month extra</strong> could save you significantly ‚Äî check the Extra Payment tab.`;

    // Build annual amortisation
    const r = rate / 100 / 12;
    let balance = principal;
    let tbody = '';
    for (let yr = 1; yr <= term && balance > 1; yr++) {
      const openBal = balance;
      let intPaid = 0, prinPaid = 0;
      for (let m = 0; m < 12 && balance > 1; m++) {
        const intCharge = balance * r;
        const prin = Math.min(monthly - intCharge, balance);
        intPaid  += intCharge;
        prinPaid += prin;
        balance  -= prin;
      }
      tbody += `<tr>
        <td>Year ${yr}</td>
        <td>${fmtR(openBal)}</td>
        <td>${fmtR(prinPaid)}</td>
        <td>${fmtR(intPaid)}</td>
        <td>${fmtR(Math.max(0, balance))}</td>
      </tr>`;
    }
    document.getElementById('amort-body').innerHTML = tbody;
    document.getElementById('repayment-results').classList.remove('hidden');
  }

  // ‚îÄ‚îÄ‚îÄ Tab 2: Extra Payment ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function calcExtra() {
    const principal = parseCurrency(document.getElementById('e-loan').value);
    const rate      = parseFloat(document.getElementById('e-rate').value) || 0;
    const term      = parseInt(document.getElementById('e-term').value) || 0;
    const extra     = parseCurrency(document.getElementById('e-extra').value);
    if (!principal || !rate || !term) return;

    const r       = rate / 100 / 12;
    const monthly = monthlyPayment(principal, rate, term);

    // Simulate normal payoff
    let balNormal = principal, monthsNormal = 0, intNormal = 0;
    while (balNormal > 1 && monthsNormal < term * 12 + 60) {
      const intCharge = balNormal * r;
      balNormal -= (monthly - intCharge);
      intNormal += intCharge;
      monthsNormal++;
    }

    // Simulate with extra payment
    let balExtra = principal, monthsExtra = 0, intExtra = 0;
    const monthlyExtra = monthly + (extra || 0);
    while (balExtra > 1 && monthsExtra < term * 12 + 60) {
      const intCharge = balExtra * r;
      const payment = Math.min(monthlyExtra, balExtra + intCharge);
      balExtra -= (payment - intCharge);
      intExtra += intCharge;
      monthsExtra++;
    }

    const monthsSaved   = monthsNormal - monthsExtra;
    const interestSaved = intNormal - intExtra;

    document.getElementById('e-strip').innerHTML = `
      <div class="result-box"><div class="result-box-label">Normal Monthly</div><div class="result-box-value">${fmtR(monthly)}</div></div>
      <div class="result-box green"><div class="result-box-label">With Extra</div><div class="result-box-value green">${fmtR(monthlyExtra)}</div></div>
      <div class="result-box green"><div class="result-box-label">Interest Saved</div><div class="result-box-value green">${fmtR(interestSaved)}</div></div>
      <div class="result-box green"><div class="result-box-label">Time Saved</div><div class="result-box-value green">${formatMonths(monthsSaved)}</div><div class="result-box-sub">paid off ${formatMonths(monthsExtra)} instead of ${formatMonths(monthsNormal)}</div></div>
    `;

    const extraMonthly = extra || 0;
    document.getElementById('e-insight').innerHTML =
      extraMonthly > 0
        ? `üéâ Paying an extra <strong>${fmtR(extraMonthly)}/month</strong> saves you <strong>${fmtR(interestSaved)}</strong> in interest and cuts <strong>${formatMonths(monthsSaved)}</strong> off your loan. Your bond is paid off in <strong>${formatMonths(monthsExtra)}</strong> instead of <strong>${formatMonths(monthsNormal)}</strong>.`
        : `Enter an extra monthly amount above to see your savings. Even R500/month on a R1.5M bond typically saves R300,000+ in interest.`;

    // Year-by-year comparison table
    let b1 = principal, b2 = principal, cumIntSaved = 0;
    let tbody = '';
    for (let yr = 1; yr <= term; yr++) {
      const open1 = b1, open2 = b2;
      for (let m = 0; m < 12; m++) {
        if (b1 > 1) { const ic = b1*r; b1 -= (monthly - ic); }
        if (b2 > 1) { const ic = b2*r; const pmt = Math.min(monthlyExtra, b2+ic); cumIntSaved += ic - b2*r + (b2*r); b2 -= (pmt - ic); cumIntSaved += (extra||0) > 0 ? ic*(extra/monthly) : 0; }
      }
      // Simpler: recalculate interest saved cumulatively
      const intSavedYr = Math.max(0, intNormal - intExtra) * (yr / term);
      const rowClass = b2 <= 0 && b1 > 0 ? ' class="extra-row"' : '';
      tbody += `<tr${rowClass}>
        <td>Year ${yr}</td>
        <td>${b1 > 1 ? fmtR(Math.max(0,b1)) : '‚úÖ Paid off'}</td>
        <td>${b2 > 1 ? fmtR(Math.max(0,b2)) : '‚úÖ Paid off'}</td>
        <td>${fmtR(intSavedYr)}</td>
      </tr>`;
      if (b2 <= 0 && yr < term) {
        tbody += `<tr><td colspan="4" style="text-align:center;padding:10px;color:#15803d;font-weight:600;background:#f0fdf4;">‚úÖ Bond with extra payments fully paid off at Year ${yr}</td></tr>`;
        break;
      }
    }
    document.getElementById('extra-amort-body').innerHTML = tbody;
    document.getElementById('extra-results').classList.remove('hidden');
  }

  // ‚îÄ‚îÄ‚îÄ Tab 3: Bond vs RA (with leverage + appreciation) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function calcVsRA() {
    const bondRate      = parseFloat(document.getElementById('v-bond-rate').value) || 0;
    const taxRate       = parseFloat(document.getElementById('v-tax-rate').value) / 100 || 0;
    const raReturn      = parseFloat(document.getElementById('v-ra-return').value) / 100 || 0;
    const monthly       = parseCurrency(document.getElementById('v-monthly').value);
    const years         = parseInt(document.getElementById('v-years').value) || 0;
    const propValue     = parseCurrency(document.getElementById('v-prop-value').value);
    const equityNow     = parseCurrency(document.getElementById('v-equity').value);
    const appreciation  = (parseFloat(document.getElementById('v-appreciation').value) || 0) / 100;

    if (!bondRate || !monthly || !years) return;

    const raMonths = years * 12;

    // ‚îÄ‚îÄ Option A: Bond interest saving only ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const bondMonthlyRate = (bondRate / 100) / 12;
    const bondFVInterest = monthly * (Math.pow(1 + bondMonthlyRate, raMonths) - 1) / bondMonthlyRate;

    // ‚îÄ‚îÄ Option B: Bond + leveraged property appreciation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // Property appreciates on full value. As bond is paid down, equity grows two ways:
    // (1) principal repayment + extra payments, (2) property appreciation
    // We model the equity growth from appreciation alone (it's independent of extra payments)
    const hasPropData = propValue > 0 && equityNow > 0;
    let leverageRatio = 0, yr1AppReturn = 0, propFV = 0, equityFV = 0, combinedFV = 0;

    if (hasPropData) {
      leverageRatio = propValue / equityNow;
      // Year-1 appreciation return on equity
      yr1AppReturn = (propValue * appreciation) / equityNow * 100;

      // Simulate over years: property appreciates, bond balance reduces (standard repayment)
      // Equity at end = property value at end - remaining bond balance
      const propFVEnd = propValue * Math.pow(1 + appreciation, years);
      // Remaining bond balance after paying normal repayments (simplified ‚Äî assume outstanding = equityNow already paid portion)
      const outstandingBond = propValue - equityNow;
      let bondBalance = outstandingBond;
      const normalMonthlyRate = (bondRate / 100) / 12;
      // Current monthly repayment for outstanding balance over remaining term (assume 20yr)
      const remainingTerm = 20;
      const normalMonthly = bondBalance > 0
        ? bondBalance * normalMonthlyRate * Math.pow(1+normalMonthlyRate, remainingTerm*12) / (Math.pow(1+normalMonthlyRate, remainingTerm*12)-1)
        : 0;

      for (let m = 0; m < raMonths && bondBalance > 0; m++) {
        const ic = bondBalance * normalMonthlyRate;
        bondBalance -= Math.max(0, normalMonthly - ic);
      }
      const remainingBond = Math.max(0, bondBalance);
      equityFV = propFVEnd - remainingBond;
      // Extra equity from extra payments (they also earn the bond rate)
      const extraEquityContrib = bondFVInterest;
      combinedFV = equityFV + extraEquityContrib;
      propFV = propFVEnd;
    }

    // ‚îÄ‚îÄ Option C: RA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const retirementTaxRate   = 0.18;
    const raNetContribCost    = 1 - taxRate;
    const raEffectiveMultiple = Math.pow(1 + raReturn, years) * (1 - retirementTaxRate) / raNetContribCost;
    const raEffectiveAnnualReturn = Math.pow(raEffectiveMultiple, 1/years) - 1;
    const raMonthlyRate = raReturn / 12;
    const raFVGross  = monthly * (Math.pow(1 + raMonthlyRate, raMonths) - 1) / raMonthlyRate;
    const raEffectiveFV = raFVGross * (1 - retirementTaxRate) / (1 - taxRate);

    // ‚îÄ‚îÄ Determine winner ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const bestFV = hasPropData
      ? Math.max(bondFVInterest, combinedFV, raEffectiveFV)
      : Math.max(bondFVInterest, raEffectiveFV);
    const raWinsVsBond = raEffectiveAnnualReturn > (bondRate / 100);
    const propWinsAll  = hasPropData && combinedFV >= raEffectiveFV && combinedFV >= bondFVInterest;
    const raWinsAll    = raEffectiveFV >= (hasPropData ? combinedFV : bondFVInterest);

    // ‚îÄ‚îÄ Leverage strip ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    if (hasPropData) {
      document.getElementById('leverage-strip').innerHTML = `
        <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;padding:16px;background:#f0fdf4;border-radius:10px;border:1px solid #86efac;">
          <div style="text-align:center;">
            <div style="font-size:0.78rem;color:#6b7280;font-weight:600;text-transform:uppercase;margin-bottom:4px;">Leverage Ratio</div>
            <div style="font-size:1.6rem;font-weight:800;color:#1b4332;">${leverageRatio.toFixed(1)}√ó</div>
            <div style="font-size:0.78rem;color:#6b7280;">${fmtR(propValue)} property / ${fmtR(equityNow)} equity</div>
          </div>
          <div style="text-align:center;">
            <div style="font-size:0.78rem;color:#6b7280;font-weight:600;text-transform:uppercase;margin-bottom:4px;">Year 1 Appreciation</div>
            <div style="font-size:1.6rem;font-weight:800;color:#1b4332;">${fmtR(propValue * appreciation)}</div>
            <div style="font-size:0.78rem;color:#6b7280;">${appreciation*100}% √ó ${fmtR(propValue)} full value</div>
          </div>
          <div style="text-align:center;">
            <div style="font-size:0.78rem;color:#6b7280;font-weight:600;text-transform:uppercase;margin-bottom:4px;">Return on Equity (yr 1)</div>
            <div style="font-size:1.6rem;font-weight:800;color:#15803d;">${yr1AppReturn.toFixed(1)}%</div>
            <div style="font-size:0.78rem;color:#6b7280;">appreciation √∑ your equity</div>
          </div>
          <div style="text-align:center;">
            <div style="font-size:0.78rem;color:#6b7280;font-weight:600;text-transform:uppercase;margin-bottom:4px;">Property Value in ${years}yr</div>
            <div style="font-size:1.6rem;font-weight:800;color:#1b4332;">${fmtR(propFV)}</div>
            <div style="font-size:0.78rem;color:#6b7280;">at ${appreciation*100}% p.a.</div>
          </div>
        </div>
      `;
    } else {
      document.getElementById('leverage-strip').innerHTML = '';
    }

    // ‚îÄ‚îÄ Verdict ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const verdictEl = document.getElementById('verdict-box');
    if (propWinsAll) {
      verdictEl.innerHTML = `<div class="verdict-box green-verdict">
        <h3>üè† Property (Bond + Appreciation) Wins</h3>
        <p>With leverage, your property strategy generates the highest effective return. A ${fmtPct(appreciation*100)} appreciation on ${fmtR(propValue)} gives you a <strong>${yr1AppReturn.toFixed(1)}% return on your equity in year 1 alone</strong>, stacking on top of interest saved. After ${years} years: estimated equity of <strong>${fmtR(combinedFV)}</strong>.</p>
      </div>`;
    } else if (raWinsAll) {
      verdictEl.innerHTML = `<div class="verdict-box green-verdict">
        <h3>üí∞ RA Contribution Wins</h3>
        <p>Even accounting for property leverage, the RA's effective return (~${fmtPct(raEffectiveAnnualReturn*100)} after tax deduction and fund growth) comes out ahead over ${years} years. Estimated RA value: <strong>${fmtR(raEffectiveFV)}</strong>.</p>
      </div>`;
    } else {
      verdictEl.innerHTML = `<div class="verdict-box amber-verdict">
        <h3>‚öñÔ∏è It's Close ‚Äî Context Matters</h3>
        <p>The difference between your best options is small. Liquidity, risk tolerance, and time to retirement should guide your choice. Consider splitting the extra payment between bond and RA.</p>
      </div>`;
    }

    // ‚îÄ‚îÄ Comparison columns ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const winA = !hasPropData && bondFVInterest >= raEffectiveFV;
    const winB = propWinsAll;
    const winC = raWinsAll && !propWinsAll;

    document.getElementById('compare-cols').innerHTML = `
      <div class="compare-card ${winA ? 'winner' : ''}">
        <div class="compare-label">Option A</div>
        <h3>üè† Bond (Interest Only) ${winA ? '<span class="winner-badge">WINNER</span>' : ''}</h3>
        <div class="compare-metric"><span class="compare-metric-label">Guaranteed return</span><span class="compare-metric-value">${fmtPct(bondRate)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Risk</span><span class="compare-metric-value green">Zero</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Liquidity</span><span class="compare-metric-value">High (access bond)</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Property appreciation</span><span class="compare-metric-value">Not included</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Value after ${years}yr</span><span class="compare-metric-value">${fmtR(bondFVInterest)}</span></div>
      </div>
      ${hasPropData ? `
      <div class="compare-card ${winB ? 'winner' : ''}">
        <div class="compare-label">Option B</div>
        <h3>üè†üìà Bond + Appreciation ${winB ? '<span class="winner-badge">WINNER</span>' : ''}</h3>
        <div class="compare-metric"><span class="compare-metric-label">Bond return (guaranteed)</span><span class="compare-metric-value">${fmtPct(bondRate)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Year 1 return on equity</span><span class="compare-metric-value green">${yr1AppReturn.toFixed(1)}% (leveraged)</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Leverage ratio</span><span class="compare-metric-value">${leverageRatio.toFixed(1)}√ó</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Risk</span><span class="compare-metric-value">Low (property)</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Equity after ${years}yr</span><span class="compare-metric-value green">${fmtR(combinedFV)}</span></div>
      </div>` : ''}
      <div class="compare-card ${winC ? 'winner' : ''}">
        <div class="compare-label">Option ${hasPropData ? 'C' : 'B'}</div>
        <h3>üí∞ RA Contribution ${winC ? '<span class="winner-badge">WINNER</span>' : ''}</h3>
        <div class="compare-metric"><span class="compare-metric-label">Fund return</span><span class="compare-metric-value">${fmtPct(raReturn*100)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Effective return (incl. tax)</span><span class="compare-metric-value green">~${fmtPct(raEffectiveAnnualReturn*100)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Liquidity</span><span class="compare-metric-value">Locked until 55</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Risk</span><span class="compare-metric-value">Market risk</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Value after ${years}yr</span><span class="compare-metric-value">${fmtR(raEffectiveFV)}</span></div>
      </div>
    `;

    // ‚îÄ‚îÄ Equity growth milestone table ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    if (hasPropData) {
      const milestones = [5, 10, 15, 20].filter(y => y <= years);
      const cells = milestones.map(y => {
        const pv = propValue * Math.pow(1 + appreciation, y);
        const eq = equityNow + (propValue * appreciation * y); // simplified linear equity growth
        return `<div class="equity-cell ${y === years ? 'highlight' : ''}">
          <div style="color:#6b7280;font-size:0.75rem;font-weight:600;text-transform:uppercase;">Year ${y}</div>
          <strong>${fmtR(pv)}</strong>
          <div style="font-size:0.78rem;color:#6b7280;margin-top:2px;">property value</div>
        </div>`;
      }).join('');
      document.getElementById('equity-growth-section').innerHTML = `
        <h4 style="font-weight:700;color:#1b4332;margin-bottom:10px;">üìà Property Value Growth (${appreciation*100}% p.a.)</h4>
        <div class="equity-grow-strip">${cells}</div>
      `;
    } else {
      document.getElementById('equity-growth-section').innerHTML = '';
    }

    // ‚îÄ‚îÄ Insights ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    document.getElementById('vsra-insight').innerHTML = hasPropData
      ? `üí° <strong>The leverage effect:</strong> Your ${leverageRatio.toFixed(1)}√ó leverage means property appreciating at ${appreciation*100}% delivers a <strong>${yr1AppReturn.toFixed(1)}% return on your equity</strong> in year 1 ‚Äî before counting the interest you save. This is why property is so powerful as a wealth-building vehicle, especially in the early years when leverage is highest. As you pay the bond down, leverage decreases but equity compounds.`
      : `üí° <strong>Add property details</strong> above to see the full leverage + appreciation comparison. The interest-saving return of ${fmtPct(bondRate)} is just part of the story.`;

    document.getElementById('vsra-caveat').innerHTML =
      `‚ö†Ô∏è <strong>Important nuances:</strong> Property appreciation figures are estimates ‚Äî SA averages 5‚Äì7% long-run but varies by location and market conditions. Property returns also include costs (rates, maintenance, insurance ‚âà 1‚Äì2% p.a.) not reflected here. RA funds are illiquid until 55. If you're near your RA deduction limit (27.5% / R350k), extra RA contributions won't get the tax break ‚Äî check the <a href="/#ra-saver">RA Tax Saver</a>. These are estimates; consult a CFP for personalised advice.`;

    document.getElementById('vsra-results').classList.remove('hidden');
  }

  // ‚îÄ‚îÄ‚îÄ Tab 4: Rent vs Buy ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  ['rvb-rent','rvb-bond-repay','rvb-deposit','rvb-prop-value','rvb-current-value','rvb-current-bond'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.addEventListener('input', () => { formatCurrInput(el); calcRentVsBuy(); });
  });
  ['rvb-bond-rate','rvb-bond-term','rvb-appreciation','rvb-invest-return','rvb-rent-inflation','rvb-years']
    .forEach(id => { const el = document.getElementById(id); if (el) el.addEventListener('input', calcRentVsBuy); });

  function formatCurrInput(el) {
    const raw = parseCurrency(el.value);
    if (raw > 0) el.value = 'R ' + fmt(raw);
  }

  function calcRentVsBuy() {
    const monthlyRent    = parseCurrency(document.getElementById('rvb-rent').value);
    const bondRepay      = parseCurrency(document.getElementById('rvb-bond-repay').value);
    const deposit        = parseCurrency(document.getElementById('rvb-deposit').value);
    const propValue      = parseCurrency(document.getElementById('rvb-prop-value').value);
    const currentValue   = parseCurrency(document.getElementById('rvb-current-value').value);
    const currentBond    = parseCurrency(document.getElementById('rvb-current-bond').value);
    const bondRate       = (parseFloat(document.getElementById('rvb-bond-rate').value) || 0) / 100;
    const bondTerm       = parseInt(document.getElementById('rvb-bond-term').value) || 20;
    const appreciation   = (parseFloat(document.getElementById('rvb-appreciation').value) || 0) / 100;
    const investReturn   = (parseFloat(document.getElementById('rvb-invest-return').value) || 0) / 100;
    const rentInflation  = (parseFloat(document.getElementById('rvb-rent-inflation').value) || 0) / 100;
    const years          = parseInt(document.getElementById('rvb-years').value) || 0;

    if (!monthlyRent || !bondRepay || !propValue || !years) return;

    // ‚îÄ‚îÄ Current Position Card (existing owners) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const currentPosEl = document.getElementById('rvb-current-position');
    const alreadyOwns  = currentValue > 0;
    if (alreadyOwns && deposit > 0) {
      const unrealisedGain  = currentValue - propValue;
      const currentEquity   = currentBond > 0 ? currentValue - currentBond : currentValue - (propValue - deposit);
      const roiOnDeposit    = deposit > 0 ? ((currentEquity - deposit) / deposit * 100) : 0;
      const currentLeverage = currentEquity > 0 ? currentValue / currentEquity : 0;
      const yr1FwdGain      = currentValue * appreciation;
      const yr1FwdROE       = currentEquity > 0 ? (yr1FwdGain / currentEquity * 100) : 0;

      currentPosEl.className = '';
      currentPosEl.innerHTML = `
        <div style="background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:2px solid #86efac;border-radius:12px;padding:20px 24px;">
          <div style="font-weight:700;color:#15803d;font-size:1rem;margin-bottom:14px;">üìç Your Current Position</div>
          <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px;">
            <div style="text-align:center;">
              <div style="font-size:0.75rem;color:#6b7280;font-weight:600;text-transform:uppercase;margin-bottom:4px;">Current Value</div>
              <div style="font-size:1.4rem;font-weight:800;color:#1b4332;">${fmtR(currentValue)}</div>
              <div style="font-size:0.78rem;color:#6b7280;">bought at ${fmtR(propValue)}</div>
            </div>
            <div style="text-align:center;">
              <div style="font-size:0.75rem;color:#6b7280;font-weight:600;text-transform:uppercase;margin-bottom:4px;">Unrealised Gain</div>
              <div style="font-size:1.4rem;font-weight:800;color:#15803d;">+${fmtR(unrealisedGain)}</div>
              <div style="font-size:0.78rem;color:#6b7280;">${((unrealisedGain/propValue)*100).toFixed(1)}% since purchase</div>
            </div>
            <div style="text-align:center;">
              <div style="font-size:0.75rem;color:#6b7280;font-weight:600;text-transform:uppercase;margin-bottom:4px;">Current Equity</div>
              <div style="font-size:1.4rem;font-weight:800;color:#1b4332;">${fmtR(currentEquity)}</div>
              <div style="font-size:0.78rem;color:#6b7280;">${currentBond > 0 ? fmtR(currentBond) + ' bond remaining' : 'est. from deposit'}</div>
            </div>
            <div style="text-align:center;">
              <div style="font-size:0.75rem;color:#6b7280;font-weight:600;text-transform:uppercase;margin-bottom:4px;">Return on Deposit</div>
              <div style="font-size:1.4rem;font-weight:800;color:${roiOnDeposit >= 0 ? '#15803d' : '#dc2626'};">${roiOnDeposit >= 0 ? '+' : ''}${roiOnDeposit.toFixed(0)}%</div>
              <div style="font-size:0.78rem;color:#6b7280;">on your ${fmtR(deposit)} deposit</div>
            </div>
            <div style="text-align:center;">
              <div style="font-size:0.75rem;color:#6b7280;font-weight:600;text-transform:uppercase;margin-bottom:4px;">Current Leverage</div>
              <div style="font-size:1.4rem;font-weight:800;color:#1b4332;">${currentLeverage.toFixed(1)}√ó</div>
              <div style="font-size:0.78rem;color:#6b7280;">${fmtR(currentValue)} √∑ ${fmtR(currentEquity)}</div>
            </div>
            <div style="text-align:center;">
              <div style="font-size:0.75rem;color:#6b7280;font-weight:600;text-transform:uppercase;margin-bottom:4px;">Next Year Appreciation</div>
              <div style="font-size:1.4rem;font-weight:800;color:#15803d;">+${fmtR(yr1FwdGain)}</div>
              <div style="font-size:0.78rem;color:#6b7280;">${yr1FwdROE.toFixed(1)}% on your equity</div>
            </div>
          </div>
        </div>`;
    } else {
      currentPosEl.className = 'hidden';
    }

    // Use current value as appreciation base if already owns
    const appreciationBase = alreadyOwns ? currentValue : propValue;

    // Ongoing costs of ownership (rates, maintenance, insurance) ‚âà 1.5% of property value p.a.
    const ongoingCostRate = 0.015;
    // Transfer duty approximation for SA (simplified 2026 table)
    function transferDuty(price) {
      if (price <= 1100000) return 0;
      if (price <= 1512500) return (price - 1100000) * 0.03;
      if (price <= 2117500) return 12375 + (price - 1512500) * 0.06;
      if (price <= 2722500) return 48675 + (price - 2117500) * 0.08;
      if (price <= 12100000) return 97075 + (price - 2722500) * 0.11;
      return 1128600 + (price - 12100000) * 0.13;
    }
    const duty           = transferDuty(propValue);
    const bondRegCost    = propValue > 0 ? Math.min(25000, propValue * 0.017) : 0;
    const sunkCosts      = duty + bondRegCost;   // buyer loses this forever
    const totalUpfront   = deposit + sunkCosts;  // total cash buyer needs on day 1

    // Show costs preview in form
    if (propValue > 0) {
      document.getElementById('rvb-costs-preview').style.display = 'block';
      document.getElementById('rvb-costs-display').innerHTML =
        `Transfer duty: <strong>${fmtR(duty)}</strong> &nbsp;|&nbsp; Bond reg + attorney: <strong>~${fmtR(bondRegCost)}</strong> &nbsp;|&nbsp; <strong>Total sunk: ${fmtR(sunkCosts)}</strong><br>
         <span style="font-size:0.85em;">Renter starts with <strong>${fmtR(deposit > 0 ? deposit + sunkCosts : sunkCosts)}</strong> to invest (deposit + these saved costs)</span>`;
    }

    const monthlyRate    = bondRate / 12;
    const totalMonths    = bondTerm * 12;

    // If existing owner, use their current bond balance; otherwise original bond = purchase price - deposit
    const startingBond = alreadyOwns && currentBond > 0 ? currentBond : (propValue - deposit);
    let bondBalance = startingBond;
    let totalInterestPaid = 0;

    // Starting equity
    const startingEquity = alreadyOwns
      ? (currentValue - startingBond)
      : deposit;

    // ‚îÄ‚îÄ Simulate both paths year by year ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // For existing owners: "keep property vs sell & rent (investing the proceeds)"
    // For new buyers: "buy vs rent (investing deposit + saved transfer costs)"
    let buyingEquity     = startingEquity;
    let rentingPortfolio = alreadyOwns
      ? startingEquity * 0.97  // ~3% selling costs if they sell today
      : deposit + sunkCosts;
    let currentRent      = monthlyRent;
    let currentPropValue = appreciationBase; // current value if already owns, purchase price if new
    let currentBondBal   = bondBalance;

    const monthlyInvestRate = investReturn / 12;
    const monthlyAppRate    = appreciation / 12;

    // Renter's monthly surplus = bond repayment - rent (if bond > rent, renter invests the diff)
    // Also: renter doesn't pay ongoing costs (landlord does); buyer does
    const monthlyOwnerCosts = (propValue * ongoingCostRate) / 12;

    const snapshots = [];

    for (let yr = 1; yr <= years; yr++) {
      for (let m = 0; m < 12; m++) {
        // Buyer: pay bond, property appreciates
        if (currentBondBal > 1) {
          const interest = currentBondBal * monthlyRate;
          const principal = Math.min(bondRepay - interest, currentBondBal);
          currentBondBal  -= principal;
          totalInterestPaid += interest;
        }
        currentPropValue *= (1 + monthlyAppRate);

        // Renter: pay rent (increases annually), invest surplus
        // Surplus = (bond repayment + owner costs) - rent
        const buyerMonthlyCost = bondRepay + monthlyOwnerCosts;
        const surplus = Math.max(0, buyerMonthlyCost - currentRent);
        rentingPortfolio = rentingPortfolio * (1 + monthlyInvestRate) + surplus;
      }

      // Annual rent increase
      currentRent *= (1 + rentInflation);

      // Buyer equity
      buyingEquity = Math.max(0, currentPropValue - currentBondBal);

      snapshots.push({
        year: yr,
        buyEquity: buyingEquity,
        rentPortfolio: rentingPortfolio,
        propValue: currentPropValue,
        bondBal: Math.max(0, currentBondBal)
      });
    }

    const finalBuy  = buyingEquity;
    const finalRent = rentingPortfolio;
    const buyWins   = finalBuy > finalRent;
    const gap       = Math.abs(finalBuy - finalRent);

    // Breakeven year (when buying equity first exceeds renting portfolio)
    let breakevenYear = null;
    for (const s of snapshots) {
      if (s.buyEquity >= s.rentPortfolio) { breakevenYear = s.year; break; }
    }

    // Year 1 leverage metrics (use current value/equity for existing owners)
    const leverageRatio  = startingEquity > 0 ? appreciationBase / startingEquity : 0;
    const yr1AppGain     = appreciationBase * appreciation;
    const yr1AppOnEquity = startingEquity > 0 ? (yr1AppGain / startingEquity) * 100 : 0;
    const monthlySurplus = Math.max(0, (bondRepay + monthlyOwnerCosts) - monthlyRent);

    // ‚îÄ‚îÄ Verdict ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    document.getElementById('rvb-verdict').innerHTML = buyWins
      ? `<div class="verdict-box green-verdict">
          <h3>üè† Buying Wins by ${fmtR(gap)} after ${years} years</h3>
          <p>Property equity of <strong>${fmtR(finalBuy)}</strong> beats the renter's investment portfolio of <strong>${fmtR(finalRent)}</strong>. ${breakevenYear ? `Buying pulls ahead at <strong>Year ${breakevenYear}</strong>.` : 'Buying leads from early on.'}</p>
        </div>`
      : `<div class="verdict-box bond-verdict">
          <h3>üèòÔ∏è Renting + Investing Wins by ${fmtR(gap)} after ${years} years</h3>
          <p>The renter's investment portfolio of <strong>${fmtR(finalRent)}</strong> beats the buyer's property equity of <strong>${fmtR(finalBuy)}</strong> over ${years} years. ${!breakevenYear ? 'Buying never pulls ahead in this period.' : ''}</p>
        </div>`;

    // ‚îÄ‚îÄ Key strip ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    document.getElementById('rvb-strip').innerHTML = `
      <div class="result-box green"><div class="rb-label">Buyer Equity (yr ${years})</div><div class="rb-value green">${fmtR(finalBuy)}</div><div class="rb-sub">property value minus bond</div></div>
      <div class="result-box blue"><div class="rb-label">Renter Portfolio (yr ${years})</div><div class="rb-value" style="color:#3b82f6;">${fmtR(finalRent)}</div><div class="rb-sub">invested difference</div></div>
      <div class="result-box"><div class="rb-label">Leverage Ratio</div><div class="rb-value">${leverageRatio.toFixed(1)}√ó</div><div class="rb-sub">property value √∑ deposit</div></div>
      <div class="result-box amber"><div class="rb-label">Year 1 Appreciation on Equity</div><div class="rb-value" style="color:#d97706;">${yr1AppOnEquity.toFixed(1)}%</div><div class="rb-sub">${fmtR(yr1AppGain)} on ${fmtR(deposit)}</div></div>
      <div class="result-box amber"><div class="rb-label">Sunk Costs (Buyer)</div><div class="rb-value" style="color:#d97706;">${fmtR(sunkCosts)}</div><div class="rb-sub">transfer duty + bond reg ‚Äî lost forever</div></div>
      <div class="result-box"><div class="rb-label">Total Buyer Outlay</div><div class="rb-value">${fmtR(totalUpfront)}</div><div class="rb-sub">deposit (equity) + ${fmtR(sunkCosts)} (sunk)</div></div>
      ${breakevenYear ? `<div class="result-box green"><div class="rb-label">Buying Breakeven</div><div class="rb-value green">Year ${breakevenYear}</div><div class="rb-sub">when equity overtakes portfolio</div></div>` : `<div class="result-box red"><div class="rb-label">Buying Breakeven</div><div class="rb-value red">Not in ${years}yr</div><div class="rb-sub">renting stays ahead</div></div>`}
    `;

    // ‚îÄ‚îÄ Side-by-side ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    document.getElementById('rvb-cols').innerHTML = `
      <div class="compare-card ${buyWins ? 'winner' : ''}">
        <div class="compare-label">Buying</div>
        <h3>üè† Buy the Property ${buyWins ? '<span class="winner-badge">WINNER</span>' : ''}</h3>
        <div class="compare-metric"><span class="compare-metric-label">Monthly cost (bond)</span><span class="compare-metric-value">${fmtR(bondRepay)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Monthly ownership costs</span><span class="compare-metric-value">${fmtR(monthlyOwnerCosts)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Deposit ‚Üí equity</span><span class="compare-metric-value green">${fmtR(deposit)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Transfer duty</span><span class="compare-metric-value" style="color:#d97706;">‚àí${fmtR(duty)} (sunk)</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Bond reg costs</span><span class="compare-metric-value" style="color:#d97706;">‚àí${fmtR(bondRegCost)} (sunk)</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Leverage</span><span class="compare-metric-value green">${leverageRatio.toFixed(1)}√ó on appreciation</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Property value after ${years}yr</span><span class="compare-metric-value">${fmtR(snapshots[years-1].propValue)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Remaining bond</span><span class="compare-metric-value">${fmtR(snapshots[years-1].bondBal)}</span></div>
        <div class="compare-metric" style="border-top:2px solid #e5e7eb;margin-top:8px;padding-top:12px;"><span class="compare-metric-label"><strong>Net equity</strong></span><span class="compare-metric-value green" style="font-size:1.2rem;"><strong>${fmtR(finalBuy)}</strong></span></div>
      </div>
      <div class="compare-card ${!buyWins ? 'winner' : ''}">
        <div class="compare-label">Renting + Investing</div>
        <h3>üèòÔ∏è Rent &amp; Invest ${!buyWins ? '<span class="winner-badge">WINNER</span>' : ''}</h3>
        <div class="compare-metric"><span class="compare-metric-label">Monthly rent (yr 1)</span><span class="compare-metric-value">${fmtR(monthlyRent)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Monthly rent (yr ${years})</span><span class="compare-metric-value">${fmtR(monthlyRent * Math.pow(1+rentInflation, years))}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Monthly surplus invested</span><span class="compare-metric-value">${fmtR(monthlySurplus)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Deposit invested upfront</span><span class="compare-metric-value">${fmtR(deposit)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Transfer costs saved &amp; invested</span><span class="compare-metric-value green">+${fmtR(sunkCosts)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Total invested from day 1</span><span class="compare-metric-value green" style="font-weight:700;">${fmtR(deposit + sunkCosts)}</span></div>
        <div class="compare-metric"><span class="compare-metric-label">Investment return</span><span class="compare-metric-value">${fmtPct(investReturn*100)} p.a.</span></div>
        <div class="compare-metric" style="border-top:2px solid #e5e7eb;margin-top:8px;padding-top:12px;"><span class="compare-metric-label"><strong>Portfolio value</strong></span><span class="compare-metric-value" style="color:#3b82f6;font-size:1.2rem;"><strong>${fmtR(finalRent)}</strong></span></div>
      </div>
    `;

    // ‚îÄ‚îÄ Timeline ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const milestones = snapshots.filter(s => s.year % 5 === 0 || s.year === years || s.year === breakevenYear).slice(0, 6);
    document.getElementById('rvb-timeline').innerHTML = `
      <h4 style="font-weight:700;color:#1b4332;margin-bottom:10px;">üìÖ Year-by-Year Snapshot</h4>
      <div style="overflow-x:auto;">
        <table style="width:100%;border-collapse:collapse;font-size:0.88rem;">
          <thead><tr style="background:#1b4332;color:white;">
            <th style="padding:9px 12px;text-align:left;">Year</th>
            <th style="padding:9px 12px;text-align:right;">Property Value</th>
            <th style="padding:9px 12px;text-align:right;">Bond Balance</th>
            <th style="padding:9px 12px;text-align:right;">üè† Equity</th>
            <th style="padding:9px 12px;text-align:right;">üèòÔ∏è Portfolio</th>
            <th style="padding:9px 12px;text-align:right;">Difference</th>
          </tr></thead>
          <tbody>${milestones.map(s => {
            const diff = s.buyEquity - s.rentPortfolio;
            const isBE = s.year === breakevenYear;
            return `<tr style="${isBE ? 'background:#f0fdf4;' : s.year % 2 === 0 ? 'background:#f9fafb;' : ''}">
              <td style="padding:9px 12px;font-weight:${isBE ? '700' : '400'};">${isBE ? '‚≠ê ' : ''}Year ${s.year}</td>
              <td style="padding:9px 12px;text-align:right;">${fmtR(s.propValue)}</td>
              <td style="padding:9px 12px;text-align:right;">${fmtR(s.bondBal)}</td>
              <td style="padding:9px 12px;text-align:right;font-weight:600;color:#15803d;">${fmtR(s.buyEquity)}</td>
              <td style="padding:9px 12px;text-align:right;font-weight:600;color:#3b82f6;">${fmtR(s.rentPortfolio)}</td>
              <td style="padding:9px 12px;text-align:right;font-weight:700;color:${diff >= 0 ? '#15803d' : '#dc2626'};">${diff >= 0 ? '+' : ''}${fmtR(diff)}</td>
            </tr>`;
          }).join('')}</tbody>
        </table>
      </div>
    `;

    // ‚îÄ‚îÄ Insights ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    document.getElementById('rvb-insight').innerHTML = buyWins
      ? `üí° <strong>Why buying wins:</strong> Your ${leverageRatio.toFixed(1)}√ó leverage means ${fmtPct(appreciation*100)} appreciation on ${fmtR(propValue)} earns <strong>${fmtR(yr1AppGain)}/year on your ${fmtR(deposit)} deposit</strong> ‚Äî a ${yr1AppOnEquity.toFixed(1)}% return on equity from appreciation alone. Note: the renter starts with <strong>${fmtR(deposit + sunkCosts)}</strong> invested (deposit + the ${fmtR(sunkCosts)} in transfer costs they don't pay) ‚Äî buying still comes out ahead because leverage dominates over time.`
      : `üí° <strong>Why renting wins here:</strong> The renter starts with <strong>${fmtR(deposit + sunkCosts)}</strong> invested (deposit + ${fmtR(sunkCosts)} in transfer costs saved) at ${fmtPct(investReturn*100)} p.a. That head start plus compound returns beats the leveraged appreciation in this scenario. Try a higher appreciation rate or longer period ‚Äî buying typically wins over 15+ years.`;

    document.getElementById('rvb-caveat').innerHTML =
      `‚ö†Ô∏è <strong>Not included in this model:</strong> Rental income (if investment property), capital gains tax on property sale (typically 40% inclusion rate for individuals), detailed transfer duty breakdown, sectional title levies, and inflation on all costs. Property appreciation can be negative in some markets and periods. This is a planning tool ‚Äî speak to a property finance specialist before committing.`;

    document.getElementById('rvb-results').classList.remove('hidden');
  }

  // Auto-run with defaults on load
  window.addEventListener('load', () => {
    calcRepayment();
    calcVsRA();
  });
  </script>
</body>
</html>
